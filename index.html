<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title> Tipificaciones CT</title>
    
    <style>
        /* Estilos Generales */
        body {
            font-family: Arial, sans-serif;
            background: #f8f8f8; /* Fondo gris claro suave */
            text-align: center;
            margin: 0;
            padding: 20px;
        }
        h1 {
            color: #2c3e50; /* Azul oscuro corporativo */
        }
        /* Estilo de la caja de b煤squeda */
        input {
            width: 80%;
            padding: 10px;
            border: 2px solid #3498db; /* Borde azul */
            border-radius: 10px;
            margin-bottom: 15px;
            box-sizing: border-box; 
            max-width: 600px;
            font-size: 1em;
        }
        /* Estilos para la barra de filtros */
        #filtros {
            margin-bottom: 20px;
            display: flex; 
            flex-wrap: wrap; 
            justify-content: center;
            max-width: 90%;
            margin-left: auto;
            margin-right: auto;
        }
        #filtros button {
            background-color: #ecf0f1;
            color: #34495e;
            border: 1px solid #bdc3c7;
            padding: 8px 12px;
            margin: 4px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s, border-color 0.2s;
            font-size: 0.85em;
            white-space: nowrap; 
        }
        /* Estilo para resaltar el bot贸n activo */
        #filtros button.active,
        #filtros button:hover {
            background-color: #3498db; /* Azul */
            color: white;
            border-color: #2980b9;
        }

        /* Estilos de cada item de la lista */
        .item {
            background: white;
            border-left: 8px solid #3498db; /* Barra lateral azul */
            margin: 10px auto;
            padding: 10px;
            width: 80%;
            max-width: 600px;
            border-radius: 8px;
            text-align: left;
            display: flex;
            flex-direction: column;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }
        .codigo {
            font-weight: bold;
            color: #2c3e50;
            margin-right: 10px;
            font-size: 1.1em;
        }
        .descripcion {
            font-size: 1em;
            flex-grow: 1;
            color: #333;
        }
        .categoria-tag {
            font-size: 0.7em;
            color: white;
            background: #2ecc71; /* Verde para la categor铆a */
            padding: 2px 6px;
            border-radius: 4px;
        }
    </style>
    </head>
<body>
    <h1> Tipificaciones CT</h1>
    
    <input type="text" id="busqueda" placeholder="Buscar c贸digo o tipificaci贸n..." />

    <div id="filtros">
        <button data-filtro="Todos" class="active">Todos</button>
        <button data-filtro="INCIDENTE">INCIDENTE</button>
        <button data-filtro="TAREA PROGRAMADA">TAREA PROGRAMADA</button>
        <button data-filtro="TAREA NO PROGRAMADA">TAREA NO PROGRAMADA</button>
        <button data-filtro="OPERACIONAL">OPERACIONAL</button>
        <button data-filtro="COMERCIAL">COMERCIAL</button>
        <button data-filtro="ADMINISTRATIVA">ADMINISTRATIVA</button>
        <button data-filtro="INFRAESTRUCTURA">INFRAESTRUCTURA</button>
        <button data-filtro="CALIDAD">CALIDAD</button>
    </div>
    
    <div id="lista"></div>

    <script>
        // 1. DATASET COMPLETO (La lista de tipificaciones de tu hoja de c谩lculo)
        const tipificaciones = [
            {"codigo":"TP-01","tipificacion":"Cruce de V铆as","categoria":"INCIDENTE"},
            {"codigo":"TP-02","tipificacion":"Ingreso y salida de unidades a Base/Sede","categoria":"INCIDENTE"},
            {"codigo":"TP-03","tipificacion":"Despacho de Unidades (Servicio, Apoyo)","categoria":"INCIDENTE"},
            {"codigo":"TP-04","tipificacion":"Retorno de Unidades","categoria":"INCIDENTE"},
            {"codigo":"TP-05","tipificacion":"Aver铆a / Desperfecto de unidades","categoria":"INCIDENTE"},
            {"codigo":"TP-06","tipificacion":"Emergencias (Apoyo Polic铆a, Mantenimiento, etc)","categoria":"INCIDENTE"},
            {"codigo":"TP-07","tipificacion":"Accidente con unidad","categoria":"INCIDENTE"},
            {"codigo":"TP-08","tipificacion":"Corte de Energ铆a","categoria":"INCIDENTE"},
            {"codigo":"TP-09","tipificacion":"Cierre de V铆a","categoria":"INCIDENTE"},
            {"codigo":"TP-10","tipificacion":"Apertura de V铆a","categoria":"INCIDENTE"},
            {"codigo":"TP-11","tipificacion":"Traslado de equipos / Personal","categoria":"TAREA PROGRAMADA"},
            {"codigo":"TP-12","tipificacion":"Abastecimiento de combustible","categoria":"TAREA PROGRAMADA"},
            {"codigo":"TP-13","tipificacion":"Entrega de Materiales","categoria":"TAREA PROGRAMADA"},
            {"codigo":"TP-14","tipificacion":"Entrega de Uniformes","categoria":"TAREA PROGRAMADA"},
            {"codigo":"TP-15","tipificacion":"Retorno de materiales / Equipos","categoria":"TAREA PROGRAMADA"},
            {"codigo":"TP-16","tipificacion":"Activaci贸n de Generadores (pruebas)","categoria":"TAREA PROGRAMADA"},
            {"codigo":"TP-17","tipificacion":"Instalaci贸n de dispositivos GPS","categoria":"TAREA PROGRAMADA"},
            {"codigo":"TP-18","tipificacion":"Instalaci贸n de Equipos de comunicaci贸n (Radios, etc)","categoria":"TAREA PROGRAMADA"},
            {"codigo":"TP-19","tipificacion":"Traslado de unidades (mantenimiento, reparaci贸n, base/sede)","categoria":"TAREA PROGRAMADA"},
            {"codigo":"TP-20","tipificacion":"Lavado de unidades","categoria":"TAREA PROGRAMADA"},
            {"codigo":"TP-21","tipificacion":"Inspecci贸n / Mantenimiento preventivo de unidades","categoria":"TAREA PROGRAMADA"},
            {"codigo":"TP-22","tipificacion":"Reuniones / Cursos / Capacitaciones","categoria":"TAREA PROGRAMADA"},
            {"codigo":"TP-23","tipificacion":"Entrega de documentos / Especies valoradas","categoria":"TAREA PROGRAMADA"},
            {"codigo":"TP-24","tipificacion":"Recojo de documentos / Especies valoradas","categoria":"TAREA PROGRAMADA"},
            {"codigo":"TP-25","tipificacion":"Limpieza de garita / Base / Sede","categoria":"TAREA PROGRAMADA"},
            {"codigo":"TP-26","tipificacion":"Pruebas de luces / sirenas / altavoz","categoria":"TAREA PROGRAMADA"},
            {"codigo":"TP-27","tipificacion":"Activaci贸n de luces de emergencia","categoria":"TAREA NO PROGRAMADA"},
            {"codigo":"TP-28","tipificacion":"Ingreso de Personal","categoria":"TAREA NO PROGRAMADA"},
            {"codigo":"TP-29","tipificacion":"Salida de Personal","categoria":"TAREA NO PROGRAMADA"},
            {"codigo":"TP-30","tipificacion":"Revisi贸n de Personal","categoria":"TAREA NO PROGRAMADA"},
            {"codigo":"TP-31","tipificacion":"Personal Ausente (Falta de marcaci贸n)","categoria":"TAREA NO PROGRAMADA"},
            {"codigo":"TP-32","tipificacion":"Entrega de llaves","categoria":"TAREA NO PROGRAMADA"},
            {"codigo":"TP-33","tipificacion":"Recojo de llaves","categoria":"TAREA NO PROGRAMADA"},
            {"codigo":"TP-34","tipificacion":"Activaci贸n de Generador (Fallo de energ铆a)","categoria":"TAREA NO PROGRAMADA"},
            {"codigo":"TP-35","tipificacion":"Activaci贸n de Generador (Mantenimiento)","categoria":"TAREA NO PROGRAMADA"},
            {"codigo":"TP-36","tipificacion":"Entrega de Repuestos","categoria":"OPERACIONAL"},
            {"codigo":"TP-37","tipificacion":"Entrega de Materiales","categoria":"OPERACIONAL"},
            {"codigo":"TP-38","tipificacion":"Traslado de Repuestos","categoria":"OPERACIONAL"},
            {"codigo":"TP-39","tipificacion":"Traslado de Materiales","categoria":"OPERACIONAL"},
            {"codigo":"TP-40","tipificacion":"Entrega de unidades","categoria":"OPERACIONAL"},
            {"codigo":"TP-41","tipificacion":"Revisi贸n de unidades","categoria":"OPERACIONAL"},
            {"codigo":"TP-42","tipificacion":"Cruce de V铆as","categoria":"OPERACIONAL"},
            {"codigo":"TP-43","tipificacion":"Control de Unidades","categoria":"OPERACIONAL"},
            {"codigo":"TP-44","tipificacion":"Despacho / Asignaci贸n de servicios","categoria":"COMERCIAL"},
            {"codigo":"TP-45","tipificacion":"Cambio de servicios","categoria":"COMERCIAL"},
            {"codigo":"TP-46","tipificacion":"Anulaci贸n de servicios","categoria":"COMERCIAL"},
            {"codigo":"TP-47","tipificacion":"Cambio de personal","categoria":"ADMINISTRATIVA"},
            {"codigo":"TP-48","tipificacion":"Solicitud de informaci贸n","categoria":"ADMINISTRATIVA"},
            {"codigo":"TP-49","tipificacion":"Informaci贸n de eventos / Aver铆as","categoria":"ADMINISTRATIVA"},
            {"codigo":"TP-50","tipificacion":"Solicitud de reportes","categoria":"ADMINISTRATIVA"},
            {"codigo":"TP-51","tipificacion":"Entrega de equipos (PC, Radio, etc)","categoria":"INFRAESTRUCTURA"},
            {"codigo":"TP-52","tipificacion":"Instalaci贸n de equipos (PC, Radio, etc)","categoria":"INFRAESTRUCTURA"},
            {"codigo":"TP-53","tipificacion":"Soporte / Mantenimiento de equipos","categoria":"INFRAESTRUCTURA"},
            {"codigo":"TP-54","tipificacion":"Falla de comunicaci贸n / sistema","categoria":"INFRAESTRUCTURA"},
            {"codigo":"TP-55","tipificacion":"Entrega / Recepci贸n de unidades","categoria":"CALIDAD"},
            {"codigo":"TP-56","tipificacion":"Inspecci贸n de calidad","categoria":"CALIDAD"},
            {"codigo":"TP-57","tipificacion":"Revisi贸n de unidades (Check list, etc)","categoria":"CALIDAD"}
        ];

        // 2. OBTENER ELEMENTOS DEL DOM
        const input = document.getElementById("busqueda");
        const lista = document.getElementById("lista");
        const contenedorFiltros = document.getElementById("filtros");

        let categoriaActiva = "Todos"; // Controla qu茅 segmento est谩 seleccionado

        // 3. FUNCIN PARA DIBUJAR LA LISTA
        function mostrarTipificaciones(filtradas) {
            lista.innerHTML = ""; // Limpiar la lista actual
            filtradas.forEach(c => {
                const div = document.createElement("div");
                div.classList.add("item");
                
                // Crea la estructura usando CDIGO, TIPIFICACIN y CATEGORIA
                div.innerHTML = `
                    <div class="item-header">
                        <span class="codigo">${c.codigo}</span>
                        <span class="categoria-tag">${c.categoria}</span>
                    </div>
                    <span class="descripcion">${c.tipificacion}</span>
                `;
                lista.appendChild(div);
            });
        }

        // 4. FUNCIN MAESTRA DE SEGMENTACIN (FILTRADO POR CATEGORA)
        function filtrarPorCategoria(categoria) {
            let listaResultado = tipificaciones; 

            // Si la categor铆a NO es "Todos", usamos .filter() para segmentar el conjunto
            if (categoria !== "Todos") {
                listaResultado = tipificaciones.filter(tipi => tipi.categoria === categoria);
            }

            // Muestra los resultados segmentados
            mostrarTipificaciones(listaResultado);
            
            // Actualiza el estilo del bot贸n activo
            document.querySelectorAll('#filtros button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-filtro="${categoria}"]`).classList.add('active');
            
            // Guarda la categor铆a activa para la b煤squeda por texto
            categoriaActiva = categoria; 
        }

        // 5. EVENTO PARA EL FILTRO POR BOTN (CLICK)
        contenedorFiltros.addEventListener("click", (evento) => {
            if (evento.target.tagName === 'BUTTON' && evento.target.dataset.filtro) {
                const categoriaSeleccionada = evento.target.dataset.filtro;
                input.value = ""; // Limpia la b煤squeda al cambiar de filtro
                filtrarPorCategoria(categoriaSeleccionada);
            }
        });

        // 6. EVENTO PARA LA BSQUEDA POR TEXTO (INPUT)
        input.addEventListener("input", () => {
            const texto = input.value.toLowerCase();
            
            // 6.1. Define el subconjunto base (la lista completa o la lista ya segmentada)
            let listaBase = tipificaciones;
            if (categoriaActiva !== "Todos") {
                listaBase = tipificaciones.filter(tipi => tipi.categoria === categoriaActiva);
            }

            // 6.2. Aplica el filtro de texto sobre el subconjunto (busca en CDIGO y TIPIFICACIN)
            const filtradasPorTexto = listaBase.filter(c =>
                c.tipificacion.toLowerCase().includes(texto) ||
                c.codigo.toLowerCase().includes(texto)
            );
            
            mostrarTipificaciones(filtradasPorTexto);
        });

        // INICIALIZACIN: Muestra la lista completa al cargar la p谩gina
        filtrarPorCategoria("Todos"); 
    </script>
    </body>
</html>
