<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title> Tr谩mites y Consultas UPC</title>
    
    <style>
        /* Estilos Generales */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f4f4f9; /* Fondo muy claro */
            text-align: center;
            margin: 0;
            padding: 20px;
        }
        h1 {
            color: #7900b9; /* Color similar al morado UPC */
        }
        /* Estilo de la caja de b煤squeda */
        input {
            width: 80%;
            padding: 10px;
            border: 2px solid #7900b9; 
            border-radius: 10px;
            margin-bottom: 15px;
            box-sizing: border-box; 
            max-width: 700px;
            font-size: 1em;
        }
        /* Estilos para la barra de filtros */
        #filtros {
            margin-bottom: 20px;
            display: flex; 
            flex-wrap: wrap; 
            justify-content: center;
            max-width: 90%;
            margin-left: auto;
            margin-right: auto;
        }
        #filtros button {
            background-color: #e5e0f5;
            color: #38005b;
            border: 1px solid #c0b5e8;
            padding: 8px 12px;
            margin: 4px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s, border-color 0.2s;
            font-size: 0.85em;
            white-space: nowrap; 
        }
        /* Estilo para resaltar el bot贸n activo */
        #filtros button.active,
        #filtros button:hover {
            background-color: #7900b9;
            color: white;
            border-color: #5d008f;
        }

        /* Estilos de cada item de la lista */
        .item {
            background: white;
            border-left: 8px solid #7900b9; /* Barra lateral morada */
            margin: 10px auto;
            padding: 15px;
            width: 80%;
            max-width: 700px;
            border-radius: 8px;
            text-align: left;
            display: flex;
            flex-direction: column;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        .codigo {
            font-weight: bold;
            color: #7900b9;
            margin-right: 10px;
            font-size: 1.2em;
        }
        .categoria-tag {
            font-size: 0.7em;
            color: white;
            background: #3498db; /* Azul para la categor铆a */
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 600;
        }
        .tipificacion {
            font-size: 0.9em;
            color: #555;
            margin-bottom: 8px;
            font-style: italic;
        }
        .respuesta {
            font-size: 1em;
            color: #333;
            padding-top: 5px;
            border-top: 1px dashed #eee;
        }
    </style>
    </head>
<body>
    <h1> Tipificaciones CT</h1>
    
    <input type="text" id="busqueda" placeholder="Buscar por tr谩mite o pasos..." />

    <div id="filtros">
        <button data-filtro="TRMITES">TRMITES</button>
    </div>
    
    <div id="lista"></div>

    <script>
        // 1. DATASET COMPLETO (La lista de tr谩mites y respuestas)
        const tramites = [
            { 
                "codigo": "EMISIN DE DOC. EN FSICO", 
                "tipificacion": "Consulta si se podr铆a brindar constancias o certificados en f铆sico", 
                "respuesta": "Se indica que por el momento no se brindan documentos en f铆sico.", 
                "categoria": "GENERAL"
            },
            { 
                "codigo": "DEVOLUCIN DE PAGOS", 
                "tipificacion": "Solicita los pasos a seguir para poder generar solicitud de Devoluci贸n de Pagos", 
                "respuesta": "Se brindan los pasos a seguir, plazo de atenci贸n y c贸mo poder obtener mayores detalles a trav茅s de Explora UPC.", 
                "categoria": "FINANCIERO"
            },
            { 
                "codigo": "SUBSANACIN DE EVALUACIN", 
                "tipificacion": "Solicita los pasos a seguir para poder generar solicitud de Subsanaci贸n de Evaluaciones", 
                "respuesta": "Se brindan los puntos de consideraci贸n, fechas disponibles, plazo de atenci贸n, costo y se comparte link de Explora UPC para que pueda obtener mayor informaci贸n al respecto.", 
                "categoria": "EVALUACIONES"
            },
            { 
                "codigo": "COPIA CERTIFICADA VIRTUAL DE DIPLOMA DE BACHILLER O TTULO PROFESIONAL", 
                "tipificacion": "Solicita informaci贸n sobre tr谩mite de Copia Certificada Virtual", 
                "respuesta": "Se brinda informaci贸n sobre las fechas disponibles, el plazo de atenci贸n, el costo del tr谩mite y la manera de obtener mayores detalles a trav茅s de Explora UPC.", 
                "categoria": "CERTIFICADOS"
            },
            { 
                "codigo": "RECUPERACIN DE EVALUACIN", 
                "tipificacion": "Solicita los pasos a seguir para poder generar solicitud de Recuperaci贸n de Evaluaci贸n", 
                "respuesta": "Se brindan los puntos de consideraci贸n, fechas disponibles, plazo de atenci贸n, costo y se comparte link de Explora UPC para que pueda obtener mayor informaci贸n al respecto.", 
                "categoria": "EVALUACIONES"
            },
            { 
                "codigo": "CERTIFICADO DE ESTUDIOS - FIRMA DIGITAL", 
                "tipificacion": "Solicita informaci贸n sobre tr谩mite de Certificado de Estudios - Firma Digital", 
                "respuesta": "Se brinda informaci贸n sobre el plazo de atenci贸n, el costo del tr谩mite y la manera de obtener mayores detalles a trav茅s de Explora UPC.", 
                "categoria": "CERTIFICADOS"
            },
            { 
                "codigo": "CERTIFICADO DE ESTUDIOS - FIRMA ELECTRNICA", 
                "tipificacion": "Solicita informaci贸n sobre tr谩mite de Certificado de Estudios - Firma Electr贸nica", 
                "respuesta": "Se brinda informaci贸n sobre el plazo de atenci贸n, el costo del tr谩mite y la manera de obtener mayores detalles a trav茅s de Explora UPC.", 
                "categoria": "CERTIFICADOS"
            },
            { 
                "codigo": "RETIRO DE CICLO - PASOS", 
                "tipificacion": "Solicita informaci贸n sobre tr谩mite de Retiro de Ciclo / Se brinda informaci贸n sobre las fechas disponibles, el plazo de atenci贸n, el costo del tr谩mite y la manera de obtener mayores detalles a trav茅s de Explora UPC.", 
                "respuesta": "Tr谩mites > Retiro de ciclo > Fechas e informaci贸n clave del proceso",
                "categoria": "TRMITES"
            }
        ];

        // 2. OBTENER ELEMENTOS DEL DOM
        const input = document.getElementById("busqueda");
        const lista = document.getElementById("lista");
        const contenedorFiltros = document.getElementById("filtros");

        let categoriaActiva = "Todos"; // Controla qu茅 segmento est谩 seleccionado

        // 3. FUNCIN PARA DIBUJAR LA LISTA
        function mostrarTramites(filtradas) {
            lista.innerHTML = ""; // Limpiar la lista actual
            if (filtradas.length === 0) {
                 lista.innerHTML = '<p style="text-align:center; color:#999; margin-top:30px;">No se encontraron resultados para la b煤squeda o filtro.</p>';
                 return;
            }
            filtradas.forEach(c => {
                const div = document.createElement("div");
                div.classList.add("item");
                
                // Crea la estructura usando las nuevas propiedades
                div.innerHTML = `
                    <div class="item-header">
                        <span class="codigo">${c.codigo}</span>
                        <span class="categoria-tag">${c.categoria}</span>
                    </div>
                    <span class="tipificacion">Tipificaci贸n: ${c.tipificacion}</span>
                    <span class="respuesta">Ruta para tipificar: ${c.respuesta}</span>
                `;
                lista.appendChild(div);
            });
        }

        // 4. FUNCIN MAESTRA DE SEGMENTACIN (FILTRADO POR CATEGORA)
        function filtrarPorCategoria(categoria) {
            let listaResultado = tramites; 

            // Segmentamos el conjunto
            if (categoria !== "Todos") {
                listaResultado = tramites.filter(tramite => tramite.categoria === categoria);
            }

            // Muestra los resultados segmentados
            mostrarTramites(listaResultado);
            
            // Actualiza el estilo del bot贸n activo
            document.querySelectorAll('#filtros button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-filtro="${categoria}"]`).classList.add('active');
            
            // Guarda la categor铆a activa para la b煤squeda por texto
            categoriaActiva = categoria; 
        }

        // 5. EVENTO PARA EL FILTRO POR BOTN (CLICK)
        contenedorFiltros.addEventListener("click", (evento) => {
            if (evento.target.tagName === 'BUTTON' && evento.target.dataset.filtro) {
                const categoriaSeleccionada = evento.target.dataset.filtro;
                input.value = ""; // Limpia la b煤squeda al cambiar de filtro
                filtrarPorCategoria(categoriaSeleccionada);
            }
        });

        // 6. EVENTO PARA LA BSQUEDA POR TEXTO (INPUT)
        input.addEventListener("input", () => {
            const texto = input.value.toLowerCase();
            
            // 6.1. Define el subconjunto base (la lista completa o la lista ya segmentada)
            let listaBase = tramites;
            if (categoriaActiva !== "Todos") {
                listaBase = tramites.filter(tramite => tramite.categoria === categoriaActiva);
            }

            // 6.2. Aplica el filtro de texto sobre el subconjunto (busca en CDIGO, TIPIFICACIN y RESPUESTA)
            const filtradasPorTexto = listaBase.filter(c =>
                c.codigo.toLowerCase().includes(texto) ||
                c.tipificacion.toLowerCase().includes(texto) ||
                c.respuesta.toLowerCase().includes(texto)
            );
            
            mostrarTramites(filtradasPorTexto);
        });

        // INICIALIZACIN: Muestra la lista completa al cargar la p谩gina
        filtrarPorCategoria("Todos"); 
    </script>
    </body>
</html>
